import { txt, rgx, seq, rep } from "./pattern"

const name = rgx(/[a-z]+/i).then(s => s.toLowerCase());
const char = rgx(/[^"&]/i);
const quoted = seq(txt('"'), rep(char), txt('"')).then(r => r[1].join(''));
export const attr = seq(name, txt('='), quoted).then(r => ({ name: r[0], value: r[2] }));

export function parse(text: string): string {
    // console.log("source", text)
    const res = txt("[b]").exec(text, 0)
    // console.log(res)
    return text;
}

function fixYouTubeLink(link: string) {
    return "https://www.youtube.com/embed/" + link.match(/([^\/]*$)/)[0];
}
